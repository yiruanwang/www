(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{476:function(a,s,t){"use strict";t.r(s);var e=t(4),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"drone-安装配置-官方指南"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#drone-安装配置-官方指南"}},[a._v("#")]),a._v(" Drone 安装配置 "),s("a",{attrs:{href:"https://docs.drone.io/",target:"_blank",rel:"noopener noreferrer"}},[a._v("官方指南"),s("OutboundLink")],1)]),a._v(" "),s("h2",{attrs:{id:"我这里选择安装-gitea-为例-文档地址-gitea-drone"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#我这里选择安装-gitea-为例-文档地址-gitea-drone"}},[a._v("#")]),a._v(" 我这里选择安装 "),s("code",[a._v("Gitea")]),a._v(" 为例 "),s("a",{attrs:{href:"https://docs.drone.io/server/provider/gitea/",target:"_blank",rel:"noopener noreferrer"}},[a._v("文档地址 Gitea | Drone"),s("OutboundLink")],1)]),a._v(" "),s("h2",{attrs:{id:"这里我们按照上章gitea-完结部分先下"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#这里我们按照上章gitea-完结部分先下"}},[a._v("#")]),a._v(" 这里我们按照上章"),s("code",[a._v("Gitea")]),a._v(" 完结部分先下")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("创建一个共享的秘密")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("openssl rand "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-hex")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("16")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#62070785c7818f05bbe88ef6c19f3e0a")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])])]),a._v(" "),s("li",[s("p",[a._v("通过"),s("code",[a._v("docker")]),a._v("拉去"),s("code",[a._v("drone")]),a._v(" 和 "),s("code",[a._v("drone-runner-docker")])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Drone的Server")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull drone/drone:1\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Drone的Runner")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull drone/drone-runner-docker:1\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])])]),a._v(" "),s("li",[s("p",[a._v("来安装 "),s("code",[a._v("drone")])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--volume")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/var/lib/drone:/data "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DRONE_GITEA_SERVER"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("http://192.168.1.88:20080 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DRONE_GITEA_CLIENT_ID"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("b72c087d-b9ac-40b1-8ec6-54f98d9c8c3e "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DRONE_GITEA_CLIENT_SECRET"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("yjqGLtJOmKtbg5Wk75vZh3w97Ro8AL9uivWiNtWKAmAd "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DRONE_RPC_SECRET"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("62070785c7818f05bbe88ef6c19f3e0a "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DRONE_SERVER_HOST"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".1.88:3080 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DRONE_SERVER_PROTO"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("http "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--publish")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3080")]),a._v(":80 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--publish")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("443")]),a._v(":443 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--detach")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("drone "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  drone/drone:1\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br")])])]),a._v(" "),s("li",[s("p",[a._v("安装 "),s("code",[a._v("drone-runner-docker")]),a._v(" "),s("a",{attrs:{href:"https://docs.drone.io/runner/docker/overview/",target:"_blank",rel:"noopener noreferrer"}},[a._v("文档 | Overview | Drone"),s("OutboundLink")],1)])])]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--detach")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--volume")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/var/run/docker.sock:/var/run/docker.sock "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DRONE_RPC_PROTO"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("http "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DRONE_RPC_HOST"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".1.88:3080 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DRONE_RPC_SECRET"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("62070785c7818f05bbe88ef6c19f3e0a "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DRONE_RUNNER_CAPACITY"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DRONE_RUNNER_NAME"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("my-first-runner "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--publish")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3000")]),a._v(":3000 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("runner "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  drone/drone-runner-docker:1\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br")])]),s("ul",[s("li",[a._v("打开地址看看")])]),a._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[a._v("http://192.168.1.88:3080\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("授权成功后。，我们新建一个项目仓库 拉取到本地")])])])}),[],!1,null,null,null);s.default=r.exports}}]);