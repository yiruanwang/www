---

title: Github Actions 实现和国内托管站同步
date: 2021-09-24 10:37:41
permalink: /pages/bff5ee/
categories:
  - 技术
  - GitHub技巧
tags:
  - coding
---
# Github Actions 自动同步到Coding.net和Gitee.com上

## 一、Github Actions To Coding.net 同步

### 注册 创建 `Coding` 代码仓库

1. 第一步当然是注册Coding账号了 [注册Coding](http://www.coding.net/)

2. 具体注册步骤不再示范！

   ![image-20210924111658688](https://githubs1.zhizhu.video/images/202109241117426.png)

3. 注册成功后，创建好代码仓库
   ![image-20210924114914223](https://githubs1.zhizhu.video/images/202109241149615.png)

4. ![image-20210924115012090](https://githubs1.zhizhu.video/images/202109241150525.png)

5. ![image-20210924115204681](https://githubs1.zhizhu.video/images/202109241152775.png)

6. ![image-20210924115442299](https://githubs1.zhizhu.video/images/202109241154413.png)

7. ![image-20210924115630939](https://githubs1.zhizhu.video/images/202109241156838.png)

8. ![image-20210924115730653](https://githubs1.zhizhu.video/images/202109241157043.png)

### 配置 `Coding` 代码仓库 权限 Token

1. ![image-20210924150547115](https://githubs1.zhizhu.video/images/202109241505932.png)
2. ![image-20210924150730291](https://githubs1.zhizhu.video/images/image-20210924150730291.png)

3.添加公匙

![image-20210924150847592](https://githubs1.zhizhu.video/images/image-20210924150847592.png)

4. [点此查看 SSH 公钥使用办法](https://help.coding.net/docs/project/features/ssh.html)

5. 示例：

   >   **git bash 中敲入命令** 

   ```sell
   ssh-keygen -m PEM -t rsa -b 4096 -C "your.email@example.com"
   ```

   ![image-20210924151921954](https://githubs1.zhizhu.video/images/image-20210924151921954.png)

6. **git bash 中敲入命令，会在 ~/.ssh 文件夹下生成 id_rsa.pub【放入coding】 文件内容和 id_rsa 【github】文件内容，分别存放公钥和私钥**

![image-20210924152235166](https://githubs1.zhizhu.video/images/image-20210924152235166.png)



7.我们用IDE编辑器打开 ` id_rsa.pub ` 文件。**全选字符串**复制上![image-20210924152859101](https://githubs1.zhizhu.video/images/image-20210924152859101.png)

8.输入登陆密码![image-20210924152957971](https://githubs1.zhizhu.video/images/image-20210924152957971.png)



9.![image-20210924153052663](https://githubs1.zhizhu.video/images/image-20210924153052663.png)

10.到此为止`Coding.net`公匙配置完毕

### 配置 `Github` 添加私匙

1.进入需要同步的仓库主页面，进入设置界面

![image-20210924153505544](../../.vuepress/public/images/image-20210924153505544.png)

2.进入`Secrets`

![image-20210924153603532](https://githubs1.zhizhu.video/images/image-20210924153603532.png)

3.新增一个token

![image-20210924155700318](https://githubs1.zhizhu.video/images/image-20210924155700318.png)

4.回到上述`第6条` .ssh 文件夹下` id_rsa` 文件内容用IDE编辑器打开全选复制上

5.回到github新增token界面粘贴上

![image-20210924160253998](https://githubs1.zhizhu.video/images/image-20210924160253998.png)



6.Github `Secrets` Token 添加完成

![image-20210924160524985](https://githubs1.zhizhu.video/images/image-20210924160524985.png)



### 现在我们回到IDE `Vs code`编辑器打开项目

1. 首先我们在项目中创建一个`.github\workflows`目录

2. 在此目录下创建一个`yml`文件。我这里命名为`github-to-coding.yml`各位随意

3. 在次文件`github-to-coding.yml`中放入以下代码

   ``` yaml
   name: 'GitHub Actions To coding'
   
   on: [push, delete]
   
   
   jobs:
     mirror_to_gitee:
       runs-on: ubuntu-latest
       steps:
         - name: 'Checkout'
           uses: actions/checkout@v1
         - name: 'Mirror to coding'
           uses: pixta-dev/repository-mirroring-action@v1
           with:
             target_repo_url:
               git@e.coding.net:qingshu/yiruanwang/docs.git # 这里请看本例第4小节
             ssh_private_key:
               ${{ secrets.CODING_GO }}    # 请看 配置 `Github` 添加私匙        
                 # ssh-keygen -m PEM -t rsa -b 4096 -C "your.email@example.com"
                 # git bash 中敲入命令，会在 ~/.ssh 文件夹下生成 id_rsa.pub【放入coding】 文件内容和 id_rsa 【github】文件内容，分别存放公钥和私钥
                 # 特别注意：两方仓库的分支要一样。不然要报错。不过不影响。主要看着烦！  
   ```

4.上面图介绍

- 16行仓库地址。这里我们要使用SSH地址
- ![image-20210924161927227](https://githubs1.zhizhu.video/images/image-20210924161927227.png)
- 18行![image-20210924160524985](../../.vuepress/public/images/image-20210924160524985-16324716481591.png)

5. 完结Coding同步

### 完成我们测试看看。如图



## 二、Github Actions To Gitee.com 同步

